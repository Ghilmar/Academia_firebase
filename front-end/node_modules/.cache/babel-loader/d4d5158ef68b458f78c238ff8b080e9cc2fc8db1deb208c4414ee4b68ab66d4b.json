{"ast":null,"code":"/**\n * Servicio de Usuarios - Consume la API en /api/users\n * Maneja GET, POST, PUT, DELETE de usuarios\n */\n\nconst API_URL = process.env.REACT_APP_API_URL || \"http://localhost:5000/api\";\n\n/**\n * Maneja respuestas de la API\n */\nasync function handleResponse(res) {\n  const text = await res.text();\n  let payload;\n  try {\n    payload = text ? JSON.parse(text) : null;\n  } catch (e) {\n    payload = text;\n  }\n  if (!res.ok) {\n    var _payload, _payload2;\n    const errorMsg = ((_payload = payload) === null || _payload === void 0 ? void 0 : _payload.error) || ((_payload2 = payload) === null || _payload2 === void 0 ? void 0 : _payload2.message) || \"API error\";\n    throw new Error(errorMsg);\n  }\n  return payload;\n}\n\n/**\n * GET /api/users - Obtener todos los usuarios\n */\nexport async function getAllUsers() {\n  try {\n    const res = await fetch(`${API_URL}/users`, {\n      headers: {\n        \"Authorization\": `Bearer ${localStorage.getItem(\"token\") || \"\"}`\n      }\n    });\n    return await handleResponse(res);\n  } catch (error) {\n    console.error(\"Error fetching users:\", error);\n    throw error;\n  }\n}\n\n/**\n * GET /api/users/:id - Obtener un usuario por ID\n */\nexport async function getUserById(id) {\n  if (!id) throw new Error(\"User ID is required\");\n  try {\n    const res = await fetch(`${API_URL}/users/${id}`, {\n      headers: {\n        \"Authorization\": `Bearer ${localStorage.getItem(\"token\") || \"\"}`\n      }\n    });\n    return await handleResponse(res);\n  } catch (error) {\n    console.error(`Error fetching user ${id}:`, error);\n    throw error;\n  }\n}\n\n/**\n * POST /api/users - Crear un nuevo usuario\n */\nexport async function createUser(data) {\n  if (!data) throw new Error(\"User data is required\");\n  try {\n    const res = await fetch(`${API_URL}/users`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${localStorage.getItem(\"token\") || \"\"}`\n      },\n      body: JSON.stringify(data)\n    });\n    return await handleResponse(res);\n  } catch (error) {\n    console.error(\"Error creating user:\", error);\n    throw error;\n  }\n}\n\n/**\n * PUT /api/users/:id - Actualizar un usuario\n */\nexport async function updateUser(id, data) {\n  if (!id) throw new Error(\"User ID is required\");\n  if (!data) throw new Error(\"User data is required\");\n  try {\n    const res = await fetch(`${API_URL}/users/${id}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${localStorage.getItem(\"token\") || \"\"}`\n      },\n      body: JSON.stringify(data)\n    });\n    return await handleResponse(res);\n  } catch (error) {\n    console.error(`Error updating user ${id}:`, error);\n    throw error;\n  }\n}\n\n/**\n * DELETE /api/users/:id - Eliminar un usuario\n */\nexport async function deleteUser(id) {\n  if (!id) throw new Error(\"User ID is required\");\n  try {\n    const res = await fetch(`${API_URL}/users/${id}`, {\n      method: \"DELETE\",\n      headers: {\n        \"Authorization\": `Bearer ${localStorage.getItem(\"token\") || \"\"}`\n      }\n    });\n    if (!res.ok) {\n      const error = await res.text();\n      throw new Error(error || \"Failed to delete user\");\n    }\n    return true;\n  } catch (error) {\n    console.error(`Error deleting user ${id}:`, error);\n    throw error;\n  }\n}\nexport default {\n  getAllUsers,\n  getUserById,\n  createUser,\n  updateUser,\n  deleteUser\n};","map":{"version":3,"names":["API_URL","process","env","REACT_APP_API_URL","handleResponse","res","text","payload","JSON","parse","e","ok","_payload","_payload2","errorMsg","error","message","Error","getAllUsers","fetch","headers","localStorage","getItem","console","getUserById","id","createUser","data","method","body","stringify","updateUser","deleteUser"],"sources":["/run/media/elghill/Disco Local D/2025_2/Ingenieria de Software/RPOYECTO/proyecto v1/front-end/src/services/userService.js"],"sourcesContent":["/**\n * Servicio de Usuarios - Consume la API en /api/users\n * Maneja GET, POST, PUT, DELETE de usuarios\n */\n\nconst API_URL = process.env.REACT_APP_API_URL || \"http://localhost:5000/api\";\n\n/**\n * Maneja respuestas de la API\n */\nasync function handleResponse(res) {\n  const text = await res.text();\n  let payload;\n  try {\n    payload = text ? JSON.parse(text) : null;\n  } catch (e) {\n    payload = text;\n  }\n  if (!res.ok) {\n    const errorMsg = payload?.error || payload?.message || \"API error\";\n    throw new Error(errorMsg);\n  }\n  return payload;\n}\n\n/**\n * GET /api/users - Obtener todos los usuarios\n */\nexport async function getAllUsers() {\n  try {\n    const res = await fetch(`${API_URL}/users`, {\n      headers: {\n        \"Authorization\": `Bearer ${localStorage.getItem(\"token\") || \"\"}`\n      }\n    });\n    return await handleResponse(res);\n  } catch (error) {\n    console.error(\"Error fetching users:\", error);\n    throw error;\n  }\n}\n\n/**\n * GET /api/users/:id - Obtener un usuario por ID\n */\nexport async function getUserById(id) {\n  if (!id) throw new Error(\"User ID is required\");\n  try {\n    const res = await fetch(`${API_URL}/users/${id}`, {\n      headers: {\n        \"Authorization\": `Bearer ${localStorage.getItem(\"token\") || \"\"}`\n      }\n    });\n    return await handleResponse(res);\n  } catch (error) {\n    console.error(`Error fetching user ${id}:`, error);\n    throw error;\n  }\n}\n\n/**\n * POST /api/users - Crear un nuevo usuario\n */\nexport async function createUser(data) {\n  if (!data) throw new Error(\"User data is required\");\n  try {\n    const res = await fetch(`${API_URL}/users`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${localStorage.getItem(\"token\") || \"\"}`\n      },\n      body: JSON.stringify(data)\n    });\n    return await handleResponse(res);\n  } catch (error) {\n    console.error(\"Error creating user:\", error);\n    throw error;\n  }\n}\n\n/**\n * PUT /api/users/:id - Actualizar un usuario\n */\nexport async function updateUser(id, data) {\n  if (!id) throw new Error(\"User ID is required\");\n  if (!data) throw new Error(\"User data is required\");\n  try {\n    const res = await fetch(`${API_URL}/users/${id}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${localStorage.getItem(\"token\") || \"\"}`\n      },\n      body: JSON.stringify(data)\n    });\n    return await handleResponse(res);\n  } catch (error) {\n    console.error(`Error updating user ${id}:`, error);\n    throw error;\n  }\n}\n\n/**\n * DELETE /api/users/:id - Eliminar un usuario\n */\nexport async function deleteUser(id) {\n  if (!id) throw new Error(\"User ID is required\");\n  try {\n    const res = await fetch(`${API_URL}/users/${id}`, {\n      method: \"DELETE\",\n      headers: {\n        \"Authorization\": `Bearer ${localStorage.getItem(\"token\") || \"\"}`\n      }\n    });\n    if (!res.ok) {\n      const error = await res.text();\n      throw new Error(error || \"Failed to delete user\");\n    }\n    return true;\n  } catch (error) {\n    console.error(`Error deleting user ${id}:`, error);\n    throw error;\n  }\n}\n\nexport default {\n  getAllUsers,\n  getUserById,\n  createUser,\n  updateUser,\n  deleteUser\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}